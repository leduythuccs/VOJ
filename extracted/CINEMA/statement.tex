Megastar là rạp chiếu phim lớn và hiện đại nhất ở Hà Nội. Rạp chiếu này có một phòng chiếu gồm M hàng ghế, mỗi hàng có N ghế. Để có được vé xem phim, bạn có thể đặt vé qua mạng. Mỗi yêu cầu đặt vé có thể đặt một lúc nhiều vé. Hiện tại, sau khi nhận được các yêu cầu đặt vé, rạp sẽ sắp xếp bố trí chỗ ngồi cho các yêu cầu sao cho các chỗ ngồi của mỗi yêu cầu là một vùng liên thông. Một ghế không nằm ở hàng đầu, hàng cuối, cột trái nhất, cột phải nhất sẽ có 4 ghế ở phía trước, phía sau, phía trái và phía phải được coi là kề với nó.  

   Công việc sắp xếp chỗ ngồi này hiện tại được làm hoàn toàn bằng tay. Bạn hãy viết chương trình sắp xếp chỗ ngồi cho hợp lý nhất.