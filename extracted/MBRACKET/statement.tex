Xét dãy ngoặc chỉ gồm các ngoặc vuông và tròn - '( ) [ ]'.

Dãy ngoặc hợp lệ là :
\begin{enumerate}
	\item '( )' , '[ ]' : hợp lệ.
	\item A hợp lệ thì (A) và [A] hợp lệ.
	\item A, B hợp lệ thì AB hợp lệ.
\end{enumerate}

Ví dụ : '( ) ( ) [ ]', '( [ ] ) [ ( ) ]' và '[ ( ( ) ) ] [ ]' hợp lệ. Còn '(', '] [', '[ ( ]' and '( [ ) ]' không hợp lệ.

Cho 1 dãy ngoặc. Ở mỗi bước chèn thêm ngoặc vuông hoặc tròn vào đầu hoặc cuối. Với mỗi bước tính độ dài dãy ngoặc hợp lệ ngắn nhất gồm các ngoặc liên tiếp nhau mà chứa ngoặc mới được thêm vào.

\