 

Cho một dãy số A gồm N phần tử. Các phần tử được đánh số từ 1 đến N. Phần tử thứ i được kí hiệu là A(i).

Người ta cần thực hiện R*Q truy vấn với dãy số, mỗi truy vấn thuộc 1 trong 3 dạng:
\begin{itemize}
	\item 1 u k: Gán A(u) = k.
	\item 2 u v: Tìm giá trị của phần tử lớn nhất trong các phần tử có chỉ số từ u đến v.
	\item 3 x: Lấy lại dãy số ở version thứ x. Các version được đánh số bằng các số nguyên từ 0 trở đi. Version đầu tiên (lúc chưa thực hiện thao tác 1 hoặc 3 nào) có số thứ tự 0. Version thứ x là version sau khi đã áp dụng x thao tác 1 và 3.
\end{itemize}